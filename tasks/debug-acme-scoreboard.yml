---
- name: ğŸ§© Debug â€” ACME scoreboard snapshot (colorized)
  ansible.builtin.debug:
    msg: |
      {% set color_reset = '\033[0m' %}
      {% set color_green = '\033[0;32m' %}
      {% set color_yellow = '\033[0;33m' %}
      {% set color_red = '\033[0;31m' %}
      {% set color_cyan = '\033[0;36m' %}
      {% set color_gray = '\033[0;37m' %}

      {% if acme_summary is not defined %}
      âš ï¸  {{ color_yellow }}No scoreboard data yet â€” no domains have been processed.{{ color_reset }}
      {% else %}
      {{ color_cyan }}ğŸ“‹ Current ACME summary for {{ inventory_hostname }}{{ color_reset }}
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      {{ color_green }}âœ… Installed:{{ color_reset }} {% for d in acme_summary.installed | default([]) %}{{ d.domain }} {% endfor %}
      {{ color_yellow }}ğŸ” Renewed:  {{ color_reset }}{% for d in acme_summary.renewed | default([]) %}{{ d.domain }} {% endfor %}
      {{ color_gray }}â¸ï¸ Skipped:  {{ color_reset }}{% for d in acme_summary.skipped | default([]) %}{{ d.domain }} {% endfor %}
      {{ color_cyan }}ğŸ—‘ï¸ Removed:  {{ color_reset }}{% for d in acme_summary.removed | default([]) %}{{ d.domain }} {% endfor %}
      {{ color_red }}âŒ Failed:   {{ color_reset }}{% for d in acme_summary.failed | default([]) %}{{ d.domain }} {% endfor %}
      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      {% endif %}
  tags: debug

